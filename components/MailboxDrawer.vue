<script setup lang="ts">
import { Mail } from "~/types";

defineEmits(["closed", "archive", "markAsRead"]);

const props = defineProps<{
  mail: Mail | null;
  isShown: boolean;
}>();

</script>

<template>
  <div :class="`mail-view ${props.isShown ? 'mail-view--open' : ''}`">
    <div class="mail-view__backdrop" @click="$emit('closed')"></div>
    <div class="mail-view__body">
      <div class="mail-view__header">
        <button class="mail-view__header-action" @click="$emit('closed')">
          <svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14.25 4.75L4.75 14.25M4.75 4.75L14.25 14.25" stroke="#88909B" stroke-width="1.5"
              stroke-linecap="round" stroke-linejoin="round" />
          </svg>

          <span> Close (Esc) </span>
        </button>
        <div>
          <button class="mail-view__header-action" @click="$emit('markAsRead')">
            <svg width="19" height="19" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M10.8807 2.08494L16.8404 5.95874C17.0509 6.09562 17.1562 6.16406 17.2325 6.25535C17.3001 6.33616 17.3508 6.42964 17.3817 6.5303C17.4167 6.64402 17.4167 6.7696 17.4167 7.02076V12.825C17.4167 14.1552 17.4167 14.8202 17.1578 15.3283C16.9301 15.7751 16.5668 16.1385 16.1199 16.3662C15.6119 16.625 14.9468 16.625 13.6167 16.625H5.38337C4.05325 16.625 3.38819 16.625 2.88015 16.3662C2.43326 16.1385 2.06993 15.7751 1.84223 15.3283C1.58337 14.8202 1.58337 14.1552 1.58337 12.825V7.02076C1.58337 6.7696 1.58337 6.64402 1.61834 6.5303C1.6493 6.42964 1.70002 6.33616 1.76755 6.25535C1.84384 6.16406 1.94913 6.09562 2.15972 5.95874L8.1194 2.08494M10.8807 2.08494C10.3809 1.76012 10.1311 1.5977 9.86185 1.53451C9.62388 1.47865 9.3762 1.47865 9.13823 1.53451C8.869 1.5977 8.61914 1.76012 8.1194 2.08494M10.8807 2.08494L16.5998 5.80235C16.872 5.97932 17.0082 6.06781 17.0553 6.18003C17.0965 6.2781 17.0965 6.38862 17.0553 6.48669C17.0082 6.59891 16.872 6.6874 16.5998 6.86438L10.8807 10.5818C10.3809 10.9066 10.1311 11.069 9.86185 11.1322C9.62388 11.1881 9.3762 11.1881 9.13823 11.1322C8.86901 11.069 8.61914 10.9066 8.1194 10.5818L2.40032 6.86438C2.12805 6.6874 1.99191 6.59891 1.94476 6.48669C1.90355 6.38862 1.90355 6.2781 1.94476 6.18003C1.99191 6.06781 2.12805 5.97933 2.40032 5.80235L8.1194 2.08494"
                stroke="#4B5563" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>

            <span>Mark as read (r)</span>
          </button>
          <button class="mail-view__header-action" @click="$emit('archive')">
            <svg width="19" height="19" viewBox="0 0 17 19" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M11.6667 4.74998V4.11665C11.6667 3.2299 11.6667 2.78652 11.4941 2.44783C11.3423 2.1499 11.1001 1.90769 10.8022 1.75589C10.4635 1.58331 10.0201 1.58331 9.13333 1.58331H7.86667C6.97992 1.58331 6.53654 1.58331 6.19785 1.75589C5.89993 1.90769 5.65771 2.1499 5.50591 2.44783C5.33333 2.78652 5.33333 3.2299 5.33333 4.11665V4.74998M6.91667 9.10415V13.0625M10.0833 9.10415V13.0625M1.375 4.74998H15.625M14.0417 4.74998V13.6166C14.0417 14.9468 14.0417 15.6118 13.7828 16.1199C13.5551 16.5668 13.1918 16.9301 12.7449 17.1578C12.2369 17.4166 11.5718 17.4166 10.2417 17.4166H6.75833C5.42821 17.4166 4.76315 17.4166 4.25511 17.1578C3.80822 16.9301 3.44489 16.5668 3.21719 16.1199C2.95833 15.6118 2.95833 14.9468 2.95833 13.6166V4.74998"
                stroke="#4B5563" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>

            <span> Archive (a) </span>
          </button>
        </div>
      </div>
      <div class="mail-view__content">
        <h1>{{ props.mail?.subject }}</h1>
        <p>{{ props.mail?.body }}</p>
      </div>
    </div>
  </div>
</template>
